require=function(t){},require("core-js/modules/es6.regexp.split");var evaluatorHoliday=function(){var t=function(t){if(!localStorage.getItem("holidays")){var e=(new Date).getFullYear(),n="https://raw.githubusercontent.com/erickLFLopes/mentoringSemanal/master/holidays/"+e+".json",o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var e=JSON.parse(this.responseText),n=[],o=0;o<e.length;o++)n.push(e[o].date);localStorage.setItem("holidays",n),t&&t()}},o.open("GET",n,!0),o.send()}},e=function(){for(var t=localStorage.getItem("holidays").split(","),e=[],n=t.length-1;n>=0;n--){var o=t[n].split("/");e.push(new Date(o[2],--o[1],o[0]))}return e},n=function(t){for(var n=e(),o=n.length-1;o>=0;o--)if(t-n[o]==0)return!0;return!1};return function(){var e=(new Date).getUTCFullYear();localStorage.getItem("holidaysYear")&&localStorage.getItem("holidaysYear")==e||(localStorage.setItem("holidaysYear",e),localStorage.removeItem("holidays")),t()}(),function(){localStorage.getItem("holidays")||t()}(),{getHolidays:e,verifyDate:n}}();require("core-js/modules/es6.regexp.replace");var PDF=function(){function t(){var t=n.template,e=n.templateData;for(var o in e){var a="{{"+o+"}}";t=t.replace(a,e[o])}var r=window.open("","","height="+n.widthWindow+",width="+n.heightWindow);r.document.write(t),r.print(),r.document.close()}function e(t,e,o){n.changeTemplate("style",t),n.changeTemplate("title",e),n.changeTemplate("data",o)}var n={heightWindow:700,widthWindow:700,template:"\n            <html>\n                <head>\n                    <style>\n                        {{style}}  \n                    </style>\n                    <title>{{title}}</title>\n                </head>\n                <body>\n                    {{data}}\n                </body>\n            </html>",templateData:{style:"",title:"",data:""},setWidthWindow:function(t){this.widthWindow=t|this.widthWindow},setHeightWindow:function(t){this.heightWindow=t|this.heightWindow},changeTemplate:function(t,e){this.templateData[t]=e}};return{generate:e,print:t,configs:n}}(),cronosUtil=function(){var t=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],e=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sabado"],n=(new Date).getMonth(),o=n+1,a=o>0?o-1:11,r=a>0?a-1:11;return{getMonthName:function(e){return t[e>0?e-1:11]},getDayName:function(t){return e[t]},getCurrentMonth:function(){return o},getLastMonth:function(){return a},getTwiceLastMonth:function(){return r},getWeekNeedTime:function(t){return 528*t},getInitialWeek:function(t){return t==o?0:4*(o-(t+1))+parseInt((new Date).getDate()/7)}}}(),viewManager=function(){var t=function(t){return'\n            <button disabled id="Month-'.concat(t,'" style="margin-rigth:1%;">\n                Gerar relatório de ').concat(cronosUtil.getMonthName(t),"\n            </button>\n        ")},e='<div class="marginTop20" style="overflow:hidden; background-color: #E1E0E0; border: 2px solid #E1E0E0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px;margin-bottom: 10px;">\n            <div style="float:left;width:2%;background-color:#E1E0E0;padding-top:5px;text-align:center">\n            <i class="fa fa-pencil"></i>\n            </div>\n            <div style="float:left;  width:98%; background-color:#fff">        <div style="padding: 10px">\n                <br>'.concat(t(cronosUtil.getCurrentMonth()),"\n                ").concat(t(cronosUtil.getLastMonth()),"\n                ").concat(t(cronosUtil.getTwiceLastMonth()),"\n                </div>\n                </div>\n            \n    </div></div>");return document.querySelector(".PageTitle +div").insertAdjacentHTML("beforeBegin",e),{btnCurrentMonth:document.querySelector("#Month-"+cronosUtil.getCurrentMonth()),btnLastMonth:document.querySelector("#Month-"+cronosUtil.getLastMonth()),btnTwiceLastMonth:document.querySelector("#Month-"+cronosUtil.getTwiceLastMonth())}}();require("core-js/modules/es6.regexp.replace");var search=function(t){"use strict";var e=function(t){return("0"+t).slice(-2)},n=function(t){return e(t.getHours())+":"+e(t.getMinutes())},o=((new Date).getMonth(),function(t){return t.querySelector(".TimeINVisualizacao")?t.querySelector(".TimeINVisualizacao").textContent:""}),a=function(t){return t.querySelector(".TimeOUTVisualizacao")?t.querySelector(".TimeOUTVisualizacao").textContent:""},r=function(t){return t.querySelectorAll(".TimeINVisualizacao")[1]?t.querySelectorAll(".TimeINVisualizacao")[1].textContent:""},i=function(t){return t.querySelectorAll(".TimeOUTVisualizacao")[1]?t.querySelectorAll(".TimeOUTVisualizacao")[1].textContent:""},c=function(t){return t.querySelectorAll("input")[5]?t.querySelectorAll("input")[5].value:""},l=function(t,e){var n=60*t.getHours()+t.getMinutes(),o=60*e.getHours()+e.getMinutes(),a=o-n;return a>0?a:0},u=function(t){var e=c(t).replace(/(\d{2})_(\d{2})_(\d{4})/,"$2/$1/$3"),u=new Date(e+" "+o(t)),d=new Date(e+" "+a(t)),s=new Date(e+" "+r(t)),h=new Date(e+" "+i(t));l(u,d),l(s,h),l(u,d),l(s,h);return{day:e.replace(/\d{2}\/(\d{2})\/\d{4}/,"$1"),month:e.replace(/(\d{2})\/\d{2}\/\d{4}/,"$1"),formatedEN:e.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$1-$2"),formatedPT:e.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3"),date:e,isHoliday:evaluatorHoliday.verifyDate(u),countableDay:!1,dayOfWeek:u.getDay(),s:n(u),e:n(d),s1:n(s),e1:n(h),accumulation:l(u,d)+l(s,h)}},d=function(t,e){for(var n=[],o=$(t).find(".DiaApontamento"),a=0;a<o.length;a++){var r=u(o[a]);r.month==e&&n.push(r)}return n},s=function(t,e){for(var n=0;n<t.length;n++)if(t[n]&&t[n].day&&1*t[n].day==1&&t[n].month&&1*t[n].month==e)return!0;return!1},h=function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&t[n].accumulation&&1*t[n].accumulation>0&&(e+=1*t[n].accumulation);return{accumulation:e,hour:parseInt(e/60),min:e%60}};return{searchDaysFromWeek:function e(n,o,a,r){t.dtoPessoaApontamentos.Week=n;var i=[];$.ajax({complete:function(){retrivingPonto=0},url:"/Dimep/Ponto/BuscarApontamentos",type:"POST",contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify(dtoPessoaApontamentos),success:function(t){var r=t.replace(/\<scrip[\s\S]*?\<\/script\>/gi,"");i=i.concat(d(r,o)),s(i,o)?a({week:i,final:!0}):(e(n-1,o,a),a({week:i,final:!1}))},error:function(t,e,n){t.responseText.indexOf("/Account/LogOn")>=0&&t.responseText.indexOf(".indexOf('/Account/LogOn')")<0&&location.reload()}})},getAccumulationWeek:h}}(window);formatNumber=function(t){return("0"+t).slice(-2)},getHour=function(t){return formatNumber(parseInt(t/60))+"h "+formatNumber(t%60)+"min"},getFormatedTr=function(t,e){return'<tr style="background-color:'.concat(e,';">\n            <td>').concat(cronosUtil.getDayName(t.dayOfWeek),"</td>\n            <td>").concat(t.formatedPT,"</td><td>").concat(t.s,"</td>\n            <td>").concat(t.e,"</td><td>").concat(t.s1,"</td>\n            <td>").concat(t.e1,"</td><td>").concat(getHour(t.accumulation),"</td></tr>")},getDefaultTr=function(t,e){return'<tr style="background-color:'.concat(e,';">\n            <td>').concat(cronosUtil.getDayName(t.dayOfWeek),"</td>\n            <td>").concat(t.formatedPT,"</td><td>-</td>\n            <td>-</td><td>-</td>\n            <td>-</td><td>-</td></tr>")},getColor=function(t,e){return t<e?"red":"#0bb50bd4"},getWeekReport=function(t){var e=t[0],n=t[t.length-1],o=0,a='<table border="1" style="border-collapse: collapse;">\n        <tr><th colspan="7">Semana de '.concat(e.formatedPT," à ").concat(n.formatedPT,"</th></tr>\n        <tr>\n            <th>dia da semana</th>\n            <th>dia do mês</th>\n            <th>Entrada</th>\n            <th>Saída para Almoço</th>\n            <th>Retorno do Almoço</th>\n            <th>Saída</th>\n            <th>Total</th>\n        </tr>"),r=0;t.forEach(function(t){var e=t.isHoliday?"#ff980073":"#fff";0==t.accumulation?a+=getDefaultTr(t,e):(o+=t.accumulation,a+=getFormatedTr(t,e)),t.countableDay&&r++});var i=cronosUtil.getWeekNeedTime(r);return a+='<tr>\n                <td colspan="6"> Tempo necessário: '.concat(getHour(i)," </td>\n                <td style='color:").concat(getColor(o,i),";'>").concat(getHour(o),"</td>\n            </tr></table><br><br>")},isHoliday=function(t){return t.isHoliday},isWeekEndDay=function(t){return 0==t.dayOfWeek||6==t.dayOfWeek},isWeekDay=function(t){return!isWeekEndDay(t)},isValidWeek=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(isWeekDay(n)&&n.accumulation>0)return!0}return!1},processCountablesDays=function(t){t.forEach(function(t){isWeekDay(t)&&!isHoliday(t)&&(t.countableDay=!0)})},getMonthData=function(t,e){var n=[],o=function(o){o.week.length>0&&isValidWeek(o.week)&&(processCountablesDays(o.week),n.push(o.week)),o.final&&e(t,n.reverse())},a=cronosUtil.getInitialWeek(t);search.searchDaysFromWeek(a>0?-1*a:a,t,o,null)};var month=(new Date).getMonth()+1,lastMonth=month>0?month-1:11,twiceLastMonth=lastMonth>0?lastMonth-1:11;buildMonthReport=function(t,e){return monthReport="<center><h1>Mês ".concat(cronosUtil.getMonthName(t),"</h1>"),e.forEach(function(t){monthReport+=getWeekReport(t)}),monthReport+"</center>"},enableBtn=function(t){return t.disabled=!1},buildButton=function(t,e,n){t.addEventListener("click",function(t,e){PDF.generate("","Relatório de ".concat(cronosUtil.getMonthName(t)),e),PDF.print()})},getMonthData(month,function(t,e){var n=viewManager.btnCurrentMonth;n.addEventListener("click",function(){PDF.generate("","Relatório de ".concat(cronosUtil.getMonthName(t)),buildMonthReport(t,e)),PDF.print()}),enableBtn(n)}),getMonthData(lastMonth,function(t,e){var n=viewManager.btnLastMonth;n.addEventListener("click",function(){PDF.generate("","Relatório de ".concat(cronosUtil.getMonthName(lastMonth)),buildMonthReport(lastMonth,e)),PDF.print()}),enableBtn(n)}),getMonthData(twiceLastMonth,function(t,e){var n=viewManager.btnTwiceLastMonth;n.addEventListener("click",function(){PDF.generate("","Relatório de ".concat(cronosUtil.getMonthName(twiceLastMonth)),buildMonthReport(twiceLastMonth,e)),PDF.print()}),enableBtn(n)});